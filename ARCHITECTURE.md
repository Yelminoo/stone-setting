# System Architecture - Real-Time Parametric Stone Setting Editor

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                         REAL-TIME EDITOR ARCHITECTURE                      â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            FRONTEND (Browser)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Control Panel      â”‚          â”‚       3D Viewport              â”‚  â”‚
â”‚  â”‚   (Left Side)        â”‚          â”‚       (Three.js)               â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                      â”‚          â”‚                                â”‚  â”‚
â”‚  â”‚ ğŸ“¦ Preset Manager    â”‚          â”‚   ğŸ¨ Scene                     â”‚  â”‚
â”‚  â”‚  â””â”€ Save/Load/Delete â”‚          â”‚    â”œâ”€ Stone (Mesh)            â”‚  â”‚
â”‚  â”‚                      â”‚          â”‚    â”œâ”€ Ring (Mesh)             â”‚  â”‚
â”‚  â”‚ ğŸ’ Stone Params      â”‚          â”‚    â”œâ”€ Prongs (Meshes)         â”‚  â”‚
â”‚  â”‚  â”œâ”€ Shape           â”‚          â”‚    â”œâ”€ Grid Helper            â”‚  â”‚
â”‚  â”‚  â”œâ”€ Width Slider    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â–ºâ”‚    â””â”€ Axes Helper          â”‚  â”‚
â”‚  â”‚  â”œâ”€ Length Slider   â”‚  Auto    â”‚                                â”‚  â”‚
â”‚  â”‚  â””â”€ Depth Slider    â”‚  Update  â”‚   ğŸ® Controls                  â”‚  â”‚
â”‚  â”‚                      â”‚          â”‚    â”œâ”€ OrbitControls           â”‚  â”‚
â”‚  â”‚ ğŸ”— Ring Params       â”‚          â”‚    â””â”€ TransformControls       â”‚  â”‚
â”‚  â”‚  â”œâ”€ Outer Radius    â”‚          â”‚                                â”‚  â”‚
â”‚  â”‚  â””â”€ Tube Radius     â”‚          â”‚   ğŸ“¹ Camera                    â”‚  â”‚
â”‚  â”‚                      â”‚          â”‚    â””â”€ Perspective 45Â°         â”‚  â”‚
â”‚  â”‚ ğŸ¦… Prong Params      â”‚          â”‚                                â”‚  â”‚
â”‚  â”‚  â”œâ”€ Count           â”‚          â”‚   ğŸ’¡ Lights                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ Thickness       â”‚          â”‚    â”œâ”€ Ambient                 â”‚  â”‚
â”‚  â”‚  â””â”€ Height          â”‚          â”‚    â”œâ”€ Directional            â”‚  â”‚
â”‚  â”‚                      â”‚          â”‚    â””â”€ Spotlight              â”‚  â”‚
â”‚  â”‚ âš¡ Actions           â”‚          â”‚                                â”‚  â”‚
â”‚  â”‚  â”œâ”€ Generate Full   â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚  â”œâ”€ Update Preview  â”‚                                              â”‚
â”‚  â”‚  â”œâ”€ Export JSON     â”‚                                              â”‚
â”‚  â”‚  â””â”€ Download GLB    â”‚                                              â”‚
â”‚  â”‚                      â”‚                                              â”‚
â”‚  â”‚ ğŸ“Š Status Display    â”‚                                              â”‚
â”‚  â”‚ ğŸ“ Transform Display â”‚                                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ HTTP REST API
                               â”‚ (JSON)
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           BACKEND (Flask Server)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                      app.py (Flask Routes)                     â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  GET  /realtime.html          â†’ Serve editor UI               â”‚    â”‚
â”‚  â”‚  POST /generate               â†’ Full model generation          â”‚    â”‚
â”‚  â”‚  POST /live_preview           â†’ Fast preview generation        â”‚    â”‚
â”‚  â”‚  POST /update_transform       â†’ Store object transforms        â”‚    â”‚
â”‚  â”‚  POST /save_preset            â†’ Save parameter preset          â”‚    â”‚
â”‚  â”‚  GET  /load_preset/<name>     â†’ Load saved preset             â”‚    â”‚
â”‚  â”‚  GET  /list_presets           â†’ List all presets              â”‚    â”‚
â”‚  â”‚  DELETE /delete_preset/<name> â†’ Delete preset                 â”‚    â”‚
â”‚  â”‚  POST /batch_generate         â†’ Generate variations           â”‚    â”‚
â”‚  â”‚  POST /export                 â†’ Export parameters             â”‚    â”‚
â”‚  â”‚  GET  /output/<file>          â†’ Serve GLB files               â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                              â”‚
â”‚                          â”‚ Function Calls                               â”‚
â”‚                          â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚          parametric_setting_core.py (Geometry Engine)          â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  generate_stone_setting()                                      â”‚    â”‚
â”‚  â”‚    â”œâ”€ create_round_stone()      â†’ Trimesh icosphere           â”‚    â”‚
â”‚  â”‚    â”œâ”€ create_ring_base()        â†’ Trimesh torus               â”‚    â”‚
â”‚  â”‚    â”œâ”€ create_frustum()          â†’ Tapered cylinders           â”‚    â”‚
â”‚  â”‚    â”œâ”€ create_prong_base()       â†’ Gallery/individual bases    â”‚    â”‚
â”‚  â”‚    â””â”€ create_claw_cluster()     â†’ Optional rim claws          â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  Coordinate System:                                            â”‚    â”‚
â”‚  â”‚    â”œâ”€ Z-axis: Vertical (up)                                   â”‚    â”‚
â”‚  â”‚    â”œâ”€ XY-plane: Horizontal                                    â”‚    â”‚
â”‚  â”‚    â”œâ”€ Ring: Torus at (0, 0, 0)                                â”‚    â”‚
â”‚  â”‚    â”œâ”€ Stone: At (0, Y_offset, 0) with 90Â° X rotation          â”‚    â”‚
â”‚  â”‚    â””â”€ Prongs: Connect stone â†’ ring horizontally               â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                              â”‚
â”‚                          â”‚ Dependencies                                 â”‚
â”‚                          â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    External Libraries                           â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  Trimesh        â†’ 3D geometry operations                       â”‚    â”‚
â”‚  â”‚  NumPy          â†’ Mathematical operations                      â”‚    â”‚
â”‚  â”‚  Flask          â†’ Web server framework                         â”‚    â”‚
â”‚  â”‚  Flask-CORS     â†’ Cross-origin resource sharing                â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ File I/O
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          FILE SYSTEM (Disk)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  output/                                                                 â”‚
â”‚    â”œâ”€ designer.glb          â† Latest designer model (stable filename)   â”‚
â”‚    â”œâ”€ production.glb        â† Latest production model                   â”‚
â”‚    â”œâ”€ preview.glb           â† Latest preview model                      â”‚
â”‚    â”œâ”€ designer_20241108.glb â† Timestamped archive                       â”‚
â”‚    â””â”€ production_20241108.glb                                            â”‚
â”‚                                                                          â”‚
â”‚  presets/                                                                â”‚
â”‚    â”œâ”€ classic_solitaire.json  â† User-saved presets                      â”‚
â”‚    â”œâ”€ halo_setting.json       â† Parameter + metadata                    â”‚
â”‚    â””â”€ vintage_princess.json                                             â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                              DATA FLOW DIAGRAM                            â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

User Adjusts Slider
        â”‚
        â”œâ”€â–º updateSlider()                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚        â”‚                             â”‚   Frontend State    â”‚
        â”‚        â””â”€â–º Update value display      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚                                      â”‚  â”‚ stone_width: 6â”‚  â”‚
        â”‚                                      â”‚  â”‚ ring_radius: 9â”‚  â”‚
        â”‚                                      â”‚  â”‚ prong_count: 4â”‚  â”‚
        â”œâ”€â–º Auto-Preview enabled?             â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚        â”‚                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚        â””â”€â–º Yes â†’ setTimeout(500ms)
        â”‚                    â”‚
        â”‚                    â””â”€â–º updatePreview()
        â”‚                            â”‚
        â”‚                            â”œâ”€â–º getCurrentParams()
        â”‚                            â”‚        â”‚
        â”‚                            â”‚        â””â”€â–º Collect all parameters
        â”‚                            â”‚
        â”‚                            â””â”€â–º POST /live_preview
        â”‚                                     â”‚
        â”‚                                     â”‚ JSON Request
        â”‚                                     â–¼
        â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                            â”‚   Flask Server      â”‚
        â”‚                            â”‚  @app.route()       â”‚
        â”‚                            â”‚        â”‚            â”‚
        â”‚                            â”‚        â–¼            â”‚
        â”‚                            â”‚  generate_stone_    â”‚
        â”‚                            â”‚    setting()        â”‚
        â”‚                            â”‚        â”‚            â”‚
        â”‚                            â”‚        â–¼            â”‚
        â”‚                            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚                            â”‚  â”‚ Create Stone â”‚   â”‚
        â”‚                            â”‚  â”‚ Create Ring  â”‚   â”‚
        â”‚                            â”‚  â”‚ Create Prongsâ”‚   â”‚
        â”‚                            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â”‚                            â”‚        â”‚            â”‚
        â”‚                            â”‚        â–¼            â”‚
        â”‚                            â”‚  Export to GLB      â”‚
        â”‚                            â”‚        â”‚            â”‚
        â”‚                            â”‚        â–¼            â”‚
        â”‚                            â”‚  Save to            â”‚
        â”‚                            â”‚  output/preview.glb â”‚
        â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                      â”‚
        â”‚                                      â”‚ JSON Response
        â”‚                                      â–¼
        â”‚                            { preview_file: "..." }
        â”‚                                      â”‚
        â”‚                                      â–¼
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º loadModel(preview_file)
                                          â”‚
                                          â”œâ”€â–º GLTFLoader.load()
                                          â”‚        â”‚
                                          â”‚        â””â”€â–º Parse GLB binary
                                          â”‚
                                          â””â”€â–º Add to Three.js scene
                                                  â”‚
                                                  â””â”€â–º Render in viewport


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                         PRESET MANAGEMENT FLOW                            â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

Save Preset:
  User clicks "Save Preset"
        â”‚
        â”œâ”€â–º Prompt for name
        â”‚
        â”œâ”€â–º Prompt for description
        â”‚
        â””â”€â–º saveCurrentPreset()
                 â”‚
                 â”œâ”€â–º getCurrentParams()
                 â”‚
                 â””â”€â–º POST /save_preset
                          â”‚
                          â””â”€â–º Server writes presets/name.json
                                   â”‚
                                   â””â”€â–º Response: success
                                            â”‚
                                            â””â”€â–º loadPresetsList() (refresh UI)

Load Preset:
  User clicks "Load" on preset
        â”‚
        â””â”€â–º loadPreset(name)
                 â”‚
                 â””â”€â–º GET /load_preset/name
                          â”‚
                          â””â”€â–º Server reads presets/name.json
                                   â”‚
                                   â””â”€â–º Response: preset data
                                            â”‚
                                            â”œâ”€â–º Update all UI elements
                                            â”‚
                                            â””â”€â–º updatePreview()


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                        TRANSFORM SYNC FLOW                                â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

User manipulates object with TransformControls
        â”‚
        â””â”€â–º objectChange event
                 â”‚
                 â”œâ”€â–º updateTransformDisplay()
                 â”‚        â”‚
                 â”‚        â””â”€â–º Update coordinate panel
                 â”‚
                 â””â”€â–º sendTransformUpdate()
                          â”‚
                          â””â”€â–º POST /update_transform
                                   â”‚
                                   â””â”€â–º Server stores transform state
                                            â”‚
                                            â””â”€â–º Response: acknowledged


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                      COMPONENT INTERACTION MAP                            â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Sliders   â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚ getCurrentP  â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚  Flask API      â”‚
â”‚   (Input)   â”‚       â”‚   arams()    â”‚       â”‚  (REST)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Transform  â”‚â—„â”€â”€â”€â”€â”€â”€â”‚  GLTFLoader  â”‚â—„â”€â”€â”€â”€â”€â”€â”‚ Trimesh Engine  â”‚
â”‚  Controls   â”‚       â”‚  (Load GLB)  â”‚       â”‚ (Generate)      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Status    â”‚â—„â”€â”€â”€â”€â”€â”€â”‚   Viewport   â”‚â—„â”€â”€â”€â”€â”€â”€â”‚  Three.js       â”‚
â”‚   Display   â”‚       â”‚   (Render)   â”‚       â”‚  Scene          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                            TECHNOLOGY STACK                               â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

Frontend:
  â”œâ”€ HTML5                 â† Structure
  â”œâ”€ CSS3                  â† Styling (Grid, Flexbox, Gradients)
  â”œâ”€ JavaScript ES6        â† Logic (async/await, modules)
  â”œâ”€ Three.js r160         â† 3D rendering
  â”‚   â”œâ”€ OrbitControls     â† Camera manipulation
  â”‚   â”œâ”€ TransformControls â† Object manipulation
  â”‚   â””â”€ GLTFLoader        â† Model loading
  â””â”€ Fetch API             â† HTTP requests

Backend:
  â”œâ”€ Python 3.8+           â† Programming language
  â”œâ”€ Flask 2.x             â† Web framework
  â”œâ”€ Flask-CORS            â† Cross-origin support
  â”œâ”€ Trimesh               â† 3D geometry library
  â”œâ”€ NumPy                 â† Mathematical operations
  â””â”€ JSON                  â† Data serialization

Communication:
  â”œâ”€ HTTP/1.1              â† Protocol
  â”œâ”€ REST API              â† Architecture pattern
  â”œâ”€ JSON                  â† Data format
  â””â”€ GLB                   â† 3D model format (GLTF binary)
```

---

## Key Architecture Principles

### 1. **Separation of Concerns**
- Frontend: User interaction + visualization
- Backend: Precise geometry generation
- File System: Persistent storage

### 2. **Real-Time Synchronization**
- Auto-preview with debounce (500ms)
- Transform updates via POST requests
- Preset sync via REST API

### 3. **Modularity**
- Independent components (sliders, viewport, status)
- Pluggable geometry functions
- Reusable API endpoints

### 4. **Performance Optimization**
- Preview mode for fast iteration
- Full generation for production quality
- Timestamped caching to avoid collisions

### 5. **User Experience**
- Immediate visual feedback
- Color-coded status messages
- Progressive enhancement (auto-preview optional)

---

## File Responsibilities

| File | Purpose | Lines | Key Functions |
|------|---------|-------|---------------|
| `realtime_editor.html` | UI + 3D viewport | 900 | init(), updatePreview(), loadModel() |
| `app.py` | Flask API routes | 600 | /generate, /live_preview, /save_preset |
| `parametric_setting_core.py` | Geometry engine | 870 | generate_stone_setting(), create_ring_base() |

---

## Security Considerations

1. **Input Validation**: All parameters validated server-side
2. **File Naming**: Sanitized preset names (avoid path traversal)
3. **CORS**: Restricted to same-origin by default
4. **Rate Limiting**: (Future) Prevent API abuse

---

## Scalability Notes

- **Current**: Single-user, local development server
- **Future**: Multi-user with authentication, cloud storage, WebSocket real-time collaboration

---

This architecture enables seamless integration between JavaScript's real-time visualization and Python's precise geometric generation! ğŸ¨ğŸ”§
